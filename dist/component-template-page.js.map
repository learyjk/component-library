{
  "version": 3,
  "sources": ["../src/component-template-page.ts"],
  "sourcesContent": ["declare var Webflow: any;\n\n// const htmlToElement = (el) => {\n//   const template = document.createElement(\"template\");\n//   //htmlString = htmlString.trim(); // Never return a text node of whitespace as the result\n//   //template.innerHTML = htmlString;\n//   setInnerHTML(template, html);\n//   return template.content.firstChild;\n// };\n\n// const setInnerHTML = (elm, html) => {\n//   console.log({ html });\n//   elm.innerHTML = html;\n//   console.log({ elm });\n//   Array.from(elm.querySelectorAll(\"script\")).forEach((oldScriptEl) => {\n//     console.log(\"script\");\n//     const newScriptEl = document.createElement(\"script\");\n\n//     Array.from(oldScriptEl.attributes).forEach((attr) => {\n//       newScriptEl.setAttribute(attr.name, attr.value);\n//     });\n\n//     const scriptText = document.createTextNode(oldScriptEl.innerHTML);\n//     newScriptEl.appendChild(scriptText);\n\n//     oldScriptEl.parentNode.replaceChild(newScriptEl, oldScriptEl);\n//   });\n// };\n\n// const addHeadScript = (src) => {\n//   console.log(\"addHeadScript\");\n//   var head = document.getElementsByTagName(\"head\")[0];\n//   var script = document.createElement(\"script\");\n//   script.type = \"text/javascript\";\n//   script.src = src;\n//   head.appendChild(script);\n// };\n\n// const evaluateCode = (elm) => {\n//   elm.querySelectorAll(\"script\").forEach((scriptTag, index) => {\n//     //console.log(scriptTag.innerHTML)\n//     console.log(`starting run ${index}`);\n//     if (scriptTag.src !== \"\") {\n//       console.log(\"scriptTab with src: \", scriptTag);\n//       addHeadScript(scriptTag.src);\n//     } else {\n//       eval(scriptTag.innerHTML);\n//     }\n\n//     console.log(`finished run ${index}`);\n//   });\n// };\n\nconst escapeHtml = (htmlString) => {\n  const rAmp = /&/g;\n  const rLt = /</g;\n  const rApos = /\\'/g;\n  const rQuot = /\\\"/g;\n  const hChars = /[&<>\\\"\\']/;\n\n  if (htmlString == null) {\n    return htmlString;\n  }\n\n  if (typeof htmlString !== \"string\") {\n    htmlString = String(htmlString);\n  }\n\n  if (hChars.test(String(htmlString))) {\n    return htmlString\n      .replace(rAmp, \"&amp;\")\n      .replace(rLt, \"&lt;\")\n      .replace(rApos, \"&apos;\")\n      .replace(rQuot, \"&quot;\");\n  } else {\n    return htmlString;\n  }\n};\n\nlet scriptsExternal: Array<HTMLScriptElement> = [];\nlet scriptsInline: Array<HTMLScriptElement> = [];\n\nconst init = async () => {\n  const slug = document.querySelector('[wb-data=\"slug\"]')?.textContent;\n  const category = document.querySelector('[wb-data=\"category\"]')?.textContent;\n  if (slug === \"\" || category == \"\") return;\n  let url = `https://raw.githubusercontent.com/learyjk/component-library/main/${category}/${slug}.html`;\n\n  try {\n    const response = await fetch(url);\n    const data = await response.text();\n    const parser = new DOMParser();\n    const parsedHTML = parser.parseFromString(data, \"text/html\");\n    if (!parsedHTML) return;\n    //console.log({ parsedHTML });\n\n    const elToAdd = parsedHTML.querySelector(\"body\")?.firstChild as HTMLDivElement;\n    if (!elToAdd) return\n    document.querySelector('[wb-data=\"preview-wrapper\"]')?.append(elToAdd)\n    const scriptTags = elToAdd.querySelectorAll('script')\n    scriptTags.forEach((scriptTag) => {\n      if (scriptTag.src !== \"\") {\n        scriptsExternal.push(scriptTag)\n      } else {\n        scriptsInline.push(scriptTag);\n      }\n    })\n    // console.log({ scriptsExternal })\n    // console.log({ scriptsInline })\n    scriptsExternal.forEach((scriptExt, index) => {\n      (function (d, s, id) {\n        var js, fjs = d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) { return; }\n        js = d.createElement(s); js.id = id;\n        js.onload = function () {\n          // remote script has loaded\n          // console.log('remote script has loaded')\n          if (index === scriptsExternal.length - 1) {\n            console.log('index: ', index)\n            scriptsInline.forEach((scriptIn) => {\n              console.log('inside')\n              eval(scriptIn.innerHTML)\n            })\n          }\n        };\n        js.async = true;\n        js.src = scriptExt.src;\n        fjs.parentNode?.insertBefore(js, fjs);\n      }(document, 'script', 'wb'));\n\n    })\n\n    // Add preview to page\n    // if (category !== \"navbar\") {\n    //   //let preview = htmlToElement(parsedHTML.querySelector('body').firstChild);\n\n    //   document\n    //     .querySelector('[wb-data=\"preview-wrapper\"]')\n    //     .append(parsedHTML.querySelector(\"body\").firstChild);\n    //   evaluateCode(document.querySelector('[wb-data=\"preview-wrapper\"]'));\n    //   console.log(\"done appending\");\n    // }\n\n    // escape html and show it below.\n    // const escapedHtml = `<pre><code>${escapeHtml(data)}</code></pre>`;\n    // const escapedEl = htmlToElement(escapedHtml);\n    // document.querySelector('[wb-data=\"html-display\"]').append(escapedEl);\n    // hljs.highlightAll();\n  } catch (e) {\n    console.log(\"error getting html\");\n  } finally {\n    Webflow.destroy();\n    Webflow.ready();\n    Webflow.require(\"ix2\").init();\n  }\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", init);\nwindow.addEventListener(\"load\", (event) => {\n  console.log(\"page is fully loaded\");\n});\n\naddGlobalEventListener(\"click\", '[wb-data=\"copy-button\"]', async (e) => {\n  const copyButton = e.target.closest('[wb-data=\"copy-button\"]');\n  const buttonText = copyButton.querySelector('[wb-data=\"text\"]');\n  const spinner = copyButton.querySelector('[wb-data=\"spinner\"]');\n  const category = copyButton\n    .querySelector('[wb-data=\"category\"]')\n    .textContent.toLowerCase();\n  const slug = copyButton\n    .querySelector('[wb-data=\"slug\"]')\n    .textContent.toLowerCase();\n\n  let wfJson = {};\n  buttonText.textContent = \"Copying...\";\n  spinner.style.display = \"block\";\n  // url\n  const url = `https://raw.githubusercontent.com/learyjk/component-library/main/${category}/${slug}.json`;\n\n  const copyButtonClicked = (event) => {\n    event.clipboardData.setData(\"application/json\", JSON.stringify(wfJson));\n    event.preventDefault();\n  };\n\n  try {\n    const response = await fetch(url);\n    const data = await response.text();\n    wfJson = JSON.parse(data);\n    document.addEventListener(\"copy\", copyButtonClicked);\n    document.execCommand(\"copy\");\n  } catch (e) {\n    console.error(\"error copying component\");\n  } finally {\n    document.removeEventListener(\"copy\", copyButtonClicked);\n    setTimeout(() => {\n      buttonText.textContent = \"Copy to Webflow\";\n      spinner.style.display = \"none\";\n    }, 1000);\n  }\n});\n\nfunction addGlobalEventListener(type, selector, callback) {\n  document.addEventListener(type, (e) => {\n    if (e.target.closest(selector)) {\n      callback(e);\n    }\n  });\n}\n"],
  "mappings": "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",
  "names": ["require_component_template_page", "__commonJSMin", "htmlString", "rAmp", "rLt", "rApos", "rQuot", "hChars", "scriptTag", "event", "copyButton", "buttonText", "spinner", "category", "slug", "wfJson", "url", "copyButtonClicked", "data", "type", "selector", "callback", "e"]
}
